(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{116:function(e,t,n){"use strict";var r=n(31);n.n(r).a},118:function(e,t,n){},120:function(e,t,n){"use strict";n(38),n(16),n(20),n(159);var r=n(39),a=(n(115),n(160),n(52),function(){return"xxxxxxxx".replace(/[x]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))});function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(n,!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=function(){var e=this,t={$ref:void 0,loading:!1,immediate:!1,isPage:!0,isResize:!1,isMerge:!1,columns:[],order:"",orderColumn:"",page:{},on:{},queryProps:{page:"page",pageSize:"pageSize",order:"order",orderColumn:"orderColumn"},request:null,getQuery:function(){var e,t=this.queryProps,n=t.page,a=t.pageSize,i=t.order,o=t.orderColumn;return e={},Object(r.a)(e,n,this.page.currentPage),Object(r.a)(e,a,this.page.pageSize),Object(r.a)(e,i,this.order),Object(r.a)(e,o,this.orderColumn),e},getData:function(){var e=this;this.request&&(this.loading=!0,new Promise((function(t){return e.request(e.getQuery(),t)})).then((function(t){var n=Array.isArray(t)?{data:t,total:t.length}:t,r=n.data,a=n.total;e.data=r,e.page.total=a,e.loading=!1})).catch((function(){e.loading=!1})))},resize:function(t){var n=e.value,r=function(){var t=e.$refs.container,r=t?t.parentNode.clientHeight:0;!r||r<=0||(n.height=r)};t&&"resize"==t.type?r():e.$nextTick((function(){r(),n.$ref&&n.$ref.doLayout()}))}},n={data:[],height:void 0,spanMethod:function(t){var n=t.rowIndex,r=t.columnIndex;if(0!=e.mergeSpans.length)return e.mergeSpans[n][e.flatColumns[r].key]}},a={sortChange:function(t){var n=t.column,r=t.prop,a=t.order;"custom"===n.sortable&&(e.value.order=a,e.value.orderColumn=r,e.value.getData())},sizeChange:function(t){e.value.page.pageSize=t,e.value.getData()},currentChange:function(){return 2===arguments.length?"currentChange":1===arguments.length?(e.value.page.currentPage=arguments.length<=0?void 0:arguments[0],e.value.getData(),"pageChange"):void 0}},i=this.$agelTableConfig||{},l=i.table||{},u=i.page||{},s=o({display:!0},i.column||{}),c=o({},this.value,{},this.attach);return{extendApi:t,defaultApi:n,eventsApi:a,pageApi:{height:45,pageSize:20,pageSizes:[10,20,50,100],currentPage:1,layout:"total, sizes, prev, pager, next, jumper",class:"agel-pagination",total:0},globalApi:l,globalPageApi:u,globalColumnApi:s,localApi:c,localPageApi:c.page||{},localEventsApi:c.on||{}}};function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(n,!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c=function(e){var t=this,n={},r=this.$scopedSlots;return e.forEach((function(e){var a=e[0],i=e[1];!1!==e[2]&&("function"==typeof i?n[a]=function(e){return i(t.$createElement,e)}:"string"==typeof i&&void 0!==r[i]&&(n[a]=function(e){return r[i](s({},e))}))})),n},p=function e(t){var n=this,r=this.$createElement;return t.map((function(t){if(t.children&&t.children.length>0)return r("el-table-column",{attrs:s({},t),key:t.key},[e.call(n,t.children)]);var a=c.call(n,[["header",t.slotHeader],["default",t.slotColumn],["default",t.slotExpand||"expand","expand"==t.type]]);return r("el-table-column",{attrs:s({},t),key:t.key,scopedSlots:a})}))};function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(n,!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f={name:"agel-table",install:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.prototype.$agelTableConfig=t,e.component(t.name||this.name,this)},props:{value:{required:!0,type:Object,default:function(){return new Object}},attach:{type:Object,default:function(){return new Object}}},data:function(){return{API:{},LOAD:!1}},computed:{styles:function(){return this.getStyles()},attrs:function(){return this.getAttrs()},events:function(){return this.getEvents()},columns:function(){return this.getColumns(this.value.columns)},flatColumns:function(){return this.getFlatColumns(this.columns)},mergeKeys:function(){return this.getMergeKeys(this.flatColumns)},mergeSpans:function(){return this.getMergeSpans()}},watch:{attach:{deep:!0,handler:"initApi"},"value.isResize":"registerResize"},created:function(){this.initApi()},beforeDestroy:function(){this.registerResize(!1)},methods:{initApi:function(){var e=this,t=l.call(this);this.$emit("input",h({},t.defaultApi,{},t.extendApi,{},t.globalApi,{},t.localApi,{page:h({},t.pageApi,{},t.globalPageApi,{},t.localPageApi)})),this.API=t,this.LOAD||this.$nextTick().then((function(){return e.LOAD=!0})).then((function(){e.value.$ref=e.$refs.table,e.value.immediate&&e.value.getData(),e.registerResize()}))},getAttrs:function(){var e={};for(var t in this.value)this.API.extendApi.hasOwnProperty(t)||(e[t]=this.value[t]);if(e.height&&this.value.isPage){var n=Number(e.height)-this.value.page.height;e.height=n<0?0:n}return e},getEvents:function(){var e={},t=this.API,n=t.eventsApi,r=t.localEventsApi,a=function(t){var a;e[(a=t,a.replace(/([A-Z])/g,"-$1").toLowerCase())]=function(){var e;n[t]&&(e=n[t].apply(n,arguments)||t),r[e]&&r[e].apply(r,arguments)}};for(var i in h({},n,{},r))a(i);return e},getStyles:function(){var e=this.value,t=e.height,n=e.page;return{container:{height:t?t+"px":"auto"},page:{height:n.height?n.height+"px":"auto"}}},getColumns:function(e){var t=this,n=e;return Array.isArray(n)||(n=Object.keys(e).map((function(n){var r=e[n];return null==r.prop&&t.$set(r,"prop",n),r}))),n.map((function(e){var n={},r=h({},t.API.globalColumnApi,{key:a()});for(var i in r)null==e[i]&&t.$set(e,i,r[i]);return e.children&&(n.children=t.getColumns(e.children),0==n.children.length&&(e.key=a())),h({},e,{},n)})).filter((function(e){return e.display}))},getFlatColumns:function(e){var t=this;return e.reduce((function(e,n){return e.concat(Array.isArray(n.children)&&n.children.length>0?t.getFlatColumns(n.children):n)}),[])},getMergeKeys:function(){var e=this.value,t=e.isMerge;return e.rowKey?[]:this.flatColumns.filter((function(e){var n=void 0===e.merge?t:e.merge;return e.prop&&n&&!e.type})).map((function(e){return e.key}))},getMergeSpans:function(){var e=this,t=[],n=-1;return this.mergeKeys.forEach((function(r){e.value.data.forEach((function(a,i){var o=e.value.data[i+1],l=e.value.data[i-1];null==t[i]&&(t[i]={}),t[i][r]={rowspan:1,colspan:1},o&&a[r]==o[r]?-1==n?t[n=i][r].rowspan++:(t[n][r].rowspan++,t[i][r].rowspan=0):(n=-1,t[i][r].rowspan=l&&l[r]==a[r]?0:1)}))})),t},renderColumns:function(){var e=this,t=this.columns;t&&0!==t.length&&(this.$slots.columns=p.call(this,t),this.$nextTick((function(){e.$refs.table.doLayout()})))},registerResize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.value.isResize;e?(this.value.resize(),window.addEventListener("resize",this.value.resize)):window.removeEventListener("resize",this.value.resize)}}},d=(n(116),n(1)),v=Object(d.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.LOAD?n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.value.loading,expression:"value.loading"}],ref:"container",staticClass:"agel-table",style:e.styles.container},[n("el-table",e._g(e._b({ref:"table",staticStyle:{width:"100%"},scopedSlots:e._u([{key:"append",fn:function(){return[e._t("append")]},proxy:!0},{key:"empty",fn:function(){return[e._t("empty")]},proxy:!0},{key:"default",fn:function(){return[e._v("\n      "+e._s(e.renderColumns())+"\n      "),e._t("columns")]},proxy:!0}],null,!0)},"el-table",e.attrs,!1),e.events)),e._v(" "),e.value.isPage?n("el-pagination",e._g(e._b({ref:"page",style:e.styles.page},"el-pagination",e.value.page,!1),e.events)):e._e()],1):e._e()}),[],!1,null,null,null).exports;"undefined"!=typeof window&&window.Vue&&v.install(window.Vue);t.a=v},275:function(e,t,n){"use strict";var r=n(118);n.n(r).a},281:function(e,t,n){"use strict";n.r(t);n(16),n(20),n(115);var r=n(0),a=n(138),i=n.n(a),o=(n(158),n(120));r.default.use(i.a),r.default.use(o.a,{column:{align:"center"}});var l={name:"test",data:function(){var e=this;this.$createElement;return{drawer:!1,table:{isResize:!0,highlightCurrentRow:!0,data:[{id:1,date:"2016-05-02",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{id:2,date:"2016-05-04",name:"王小虎1",address:"上海市普陀区金沙江路 1518 弄"},{id:3,date:"2016-05-01",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{id:4,date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1516 弄"}],columns:[{type:"index",index:function(e){return e}},{type:"expand",slotExpand:function(e){return e("p",["小虎"])}},{label:"懒加载",minWidth:150,prop:"name"},{label:"懒加载2",prop:"address",merge:!0,children:[{label:"懒加载",prop:"address",merge:!1,minWidth:150},{label:"懒加载",prop:"address",minWidth:150,slotExpand:function(e){return e("p",["小虎"])},slotHeader:function(e,t){return e("div",["自定义表头",t.column.label])},slotColumn:function(e,t){return e("div",["自定义懒加载,",t.row.name])}}]}],request:function(t,n){e.http(t).then((function(e){n({data:e,total:5*t.pageSize})}))}}}},computed:{displayColumns:function(){var e=this;return Object.keys(this.table.columns).map((function(t){return e.table.columns[t]}))}},watch:{"table.isResize":function(e){e||(this.table.height="")}},methods:{getData:function(){this.table.getData()},removeData:function(){var e=this;this.table.columns.name.dispaly=!1,this.http({page:1,pageSize:0}).then((function(t){e.table.data=t,e.table.page.total=0,e.table.page.currentPage=1}))},http:function(e){var t=e.page,n=e.pageSize,r=e.level,a=void 0===r?1:r;return new Promise((function(e){setTimeout((function(){for(var r=[],i=0;i<n;i++){var o=(t-1)*n+i;r.push({id:Math.random(),name:"我是".concat(a,"级"),user:"admin",index:o,level:a,hasChildren:0==i&&a<3})}e(r)}),200)}))}}},u=(n(275),n(1)),s=Object(u.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"demo-page"},[n("div",{staticClass:"table-box",style:{height:e.table.isResize?"60vh":"auto"}},[n("agel-table",{model:{value:e.table,callback:function(t){e.table=t},expression:"table"}})],1)])}),[],!1,null,null,null);t.default=s.exports},31:function(e,t,n){}}]);