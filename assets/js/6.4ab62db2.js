(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{116:function(e,t,n){"use strict";var a=n(31);n.n(a).a},118:function(e,t,n){},120:function(e,t,n){"use strict";n(38),n(15),n(19),n(159);var a=n(39),r=(n(46),n(160),n(53),function(){return"xxxxxxxx".replace(/[x]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))});function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(n,!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var o=function(){var e=this,t={$ref:void 0,loading:!1,immediate:!1,isPage:!0,isResize:!1,isMerge:!1,columns:[],order:"",orderColumn:"",page:{},on:{},queryProps:{page:"page",pageSize:"pageSize",order:"order",orderColumn:"orderColumn"},request:null,getQuery:function(){var e,t=this.queryProps,n=t.page,r=t.pageSize,i=t.order,l=t.orderColumn;return e={},Object(a.a)(e,n,this.page.currentPage),Object(a.a)(e,r,this.page.pageSize),Object(a.a)(e,i,this.order),Object(a.a)(e,l,this.orderColumn),e},getData:function(){var e=this;this.request&&(this.loading=!0,new Promise((function(t){return e.request(e.getQuery(),t)})).then((function(t){var n=Array.isArray(t)?{data:t,total:t.length}:t,a=n.data,r=n.total;e.data=a,e.page.total=r,e.loading=!1})).catch((function(t){console.error("数据代理失败:"+t),e.loading=!1})))},resize:function(t){var n=e.value,a=function(){var t=e.$refs.container,a=t?t.parentNode.clientHeight:0;!a||a<=0||(n.height=a)};t&&"resize"==t.type?a():e.$nextTick((function(){a(),n.$ref&&n.$ref.doLayout()}))}},n={data:[],height:void 0,spanMethod:function(t){var n=t.rowIndex,a=t.columnIndex;if(0!=e.mergeSpans.length)return e.mergeSpans[n][e.flatColumns[a].key]}},r={sortChange:function(t){var n=t.column,a=t.prop,r=t.order;"custom"===n.sortable&&(e.value.order=r,e.value.orderColumn=a,e.value.getData())},sizeChange:function(t){e.value.page.pageSize=t,e.value.getData()},currentChange:function(){return 2===arguments.length?"currentChange":1===arguments.length?(e.value.page.currentPage=arguments.length<=0?void 0:arguments[0],e.value.getData(),"pageChange"):void 0}},i=this.$agelTableConfig||{},o=i.table||{},s=i.page||{},u=l({display:!0},i.column||{}),c=l({},this.value,{},this.attach);return{extendApi:t,defaultApi:n,eventsApi:r,pageApi:{height:45,pageSize:20,pageSizes:[10,20,50,100],currentPage:1,layout:"total, sizes, prev, pager, next, jumper",class:"agel-pagination",total:0},globalApi:o,globalPageApi:s,globalColumnApi:u,localApi:c,localPageApi:c.page||{},localEventsApi:c.on||{}}};function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(n,!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c=function e(t){var n=this,a=this.$createElement,r=this.$scopedSlots;return t.map((function(t){if(t.children&&t.children.length>0)return a("el-table-column",{attrs:u({},t),key:t.key},[e.call(n,t.children)]);var i={},l=function(e){return e&&void 0!==r[e]};return l(t.slotHeader)&&(i.header=function(e){return r[t.slotHeader](u({},e))}),l(t.slotColumn)?i.default=function(e){return r[t.slotColumn](u({},e))}:"expand"==t.type&&l("expand")&&(i.default=function(e){return r.expand(u({},e))}),a("el-table-column",{attrs:u({},t),key:t.key,scopedSlots:i})}))};function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(n,!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h={name:"agel-table",install:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.prototype.$agelTableConfig=t,e.component(t.name||this.name,this)},props:{value:{required:!0,type:Object,default:function(){return new Object}},attach:{type:Object,default:function(){return new Object}}},data:function(){return{API:{},LOAD:!1}},computed:{styles:function(){return this.getStyles()},attrs:function(){return this.getAttrs()},events:function(){return this.getEvents()},columns:function(){return this.getColumns(this.value.columns)},flatColumns:function(){return this.getFlatColumns(this.columns)},mergeKeys:function(){return this.getMergeKeys(this.flatColumns)},mergeSpans:function(){return this.getMergeSpans()}},watch:{attach:{deep:!0,handler:"initApi"},"value.isResize":"registerResize"},created:function(){this.initApi()},beforeDestroy:function(){this.registerResize(!1)},methods:{initApi:function(){var e=this,t=o.call(this);this.$emit("input",d({},t.defaultApi,{},t.extendApi,{},t.globalApi,{},t.localApi,{page:d({},t.pageApi,{},t.globalPageApi,{},t.localPageApi)})),this.API=t,this.LOAD||this.$nextTick().then((function(){return e.LOAD=!0})).then((function(){e.value.$ref=e.$refs.table,e.value.immediate&&e.value.getData(),e.registerResize()}))},getAttrs:function(){var e={};for(var t in this.value)this.API.extendApi.hasOwnProperty(t)||(e[t]=this.value[t]);if(e.height&&this.value.isPage){var n=Number(e.height)-this.value.page.height;e.height=n<0?0:n}return e},getEvents:function(){var e={},t=this.API,n=t.eventsApi,a=t.localEventsApi,r=function(t){var r;e[(r=t,r.replace(/([A-Z])/g,"-$1").toLowerCase())]=function(){var e;n[t]&&(e=n[t].apply(n,arguments)||t),a[e]&&a[e].apply(a,arguments)}};for(var i in d({},n,{},a))r(i);return e},getStyles:function(){var e=this.value,t=e.height,n=e.page;return{container:{height:t?t+"px":"auto"},page:{height:n.height?n.height+"px":"auto"}}},getColumns:function(e){var t=this,n=e;return Array.isArray(n)||(n=Object.keys(e).map((function(n){var a=e[n];return null==a.prop&&t.$set(a,"prop",n),a}))),n.map((function(e){var n={},a=d({},t.API.globalColumnApi,{key:r()});for(var i in a)null==e[i]&&t.$set(e,i,a[i]);return e.children&&(n.children=t.getColumns(e.children),0==n.children.length&&(e.key=r())),d({},e,{},n)})).filter((function(e){return e.display}))},getFlatColumns:function(e){var t=this;return e.reduce((function(e,n){return e.concat(Array.isArray(n.children)&&n.children.length>0?t.getFlatColumns(n.children):n)}),[])},getMergeKeys:function(){var e=this.value,t=e.isMerge;return e.rowKey?[]:this.flatColumns.filter((function(e){var n=void 0===e.merge?t:e.merge;return e.prop&&n&&!e.type})).map((function(e){return e.key}))},getMergeSpans:function(){var e=this,t=[],n=-1;return this.mergeKeys.forEach((function(a){e.value.data.forEach((function(r,i){var l=e.value.data[i+1],o=e.value.data[i-1];null==t[i]&&(t[i]={}),t[i][a]={rowspan:1,colspan:1},l&&r[a]==l[a]?-1==n?t[n=i][a].rowspan++:(t[n][a].rowspan++,t[i][a].rowspan=0):(n=-1,t[i][a].rowspan=o&&o[a]==r[a]?0:1)}))})),t},renderColumns:function(){var e=this,t=this.columns;t&&0!==t.length&&(this.$slots.columns=c.call(this,t),this.$nextTick((function(){e.$refs.table.doLayout()})))},registerResize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.value.isResize;e?(this.value.resize(),window.addEventListener("resize",this.value.resize)):window.removeEventListener("resize",this.value.resize)}}},g=(n(116),n(1)),v=Object(g.a)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.LOAD?n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.value.loading,expression:"value.loading"}],ref:"container",staticClass:"agel-table",style:e.styles.container},[n("el-table",e._g(e._b({ref:"table",staticStyle:{width:"100%"},scopedSlots:e._u([{key:"append",fn:function(){return[e._t("append")]},proxy:!0},{key:"empty",fn:function(){return[e._t("empty")]},proxy:!0},{key:"default",fn:function(){return[e._v("\n      "+e._s(e.renderColumns())+"\n      "),e._t("columns")]},proxy:!0}],null,!0)},"el-table",e.attrs,!1),e.events)),e._v(" "),e.value.isPage?n("el-pagination",e._g(e._b({ref:"page",style:e.styles.page},"el-pagination",e.value.page,!1),e.events)):e._e()],1):e._e()}),[],!1,null,null,null).exports;"undefined"!=typeof window&&window.Vue&&v.install(window.Vue);t.a=v},274:function(e,t,n){"use strict";var a=n(118);n.n(a).a},280:function(e,t,n){"use strict";n.r(t);n(46),n(15),n(19);var a=n(0),r=n(138),i=n.n(r),l=(n(158),n(120));a.default.use(i.a),a.default.use(l.a,{column:{align:"center"}});var o={name:"test",data:function(){var e=this;return{drawer:!1,table:{isResize:!0,highlightCurrentRow:!0,data:[{id:1,date:"2016-05-02",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{id:2,date:"2016-05-04",name:"王小虎1",address:"上海市普陀区金沙江路 1518 弄"},{id:3,date:"2016-05-01",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{id:4,date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1516 弄"}],columns:[{type:"index",index:function(e){return e}},{type:"expand"},{label:"懒加载",minWidth:150,prop:"name"},{label:"懒加载2",prop:"address",merge:!0,children:[{label:"懒加载",prop:"address",merge:!0,minWidth:150},{label:"懒加载",prop:"address",minWidth:150}]}],request:function(t,n){e.http(t).then((function(e){n({data:e,total:5*t.pageSize})}))}}}},computed:{displayColumns:function(){var e=this;return Object.keys(this.table.columns).map((function(t){return e.table.columns[t]}))},attach:function(){var e={columns:[{type:"index",index:function(e){return e}},{type:"expand"},{label:"懒加载",minWidth:150,prop:"name"},{label:"懒加载2",prop:"address",display:this.drawer,merge:!0,children:[{label:"懒加载",prop:"address",merge:!0,minWidth:150},{label:"懒加载",prop:"address",minWidth:150}]}]};return this.drawer&&(e.isPage=!1),e}},watch:{"table.isResize":function(e){e||(this.table.height="")}},methods:{getData:function(){this.table.getData()},removeData:function(){var e=this;this.table.columns.name.dispaly=!1,this.http({page:1,pageSize:0}).then((function(t){e.table.data=t,e.table.page.total=0,e.table.page.currentPage=1}))},http:function(e){var t=e.page,n=e.pageSize,a=e.level,r=void 0===a?1:a;return new Promise((function(e){setTimeout((function(){for(var a=[],i=0;i<n;i++){var l=(t-1)*n+i;a.push({id:Math.random(),name:"我是".concat(r,"级"),user:"admin",index:l,level:r,hasChildren:0==i&&r<3})}e(a)}),200)}))}}},s=(n(274),n(1)),u=Object(s.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"demo-page"},[n("el-drawer",{attrs:{title:"功能区面板",direction:"rtl",visible:e.drawer,size:"400px","custom-class":"demo-page-panel"},on:{"update:visible":function(t){e.drawer=t}}},[n("div",{staticClass:"input-item"},[n("div",{staticClass:"lablel"},[e._v("功能切换")]),e._v(" "),n("el-checkbox",{model:{value:e.table.isPage,callback:function(t){e.$set(e.table,"isPage",t)},expression:"table.isPage"}},[e._v("分页")]),e._v(" "),n("el-checkbox",{model:{value:e.table.showSummary,callback:function(t){e.$set(e.table,"showSummary",t)},expression:"table.showSummary"}},[e._v("合计")]),e._v(" "),n("el-checkbox",{model:{value:e.table.isResize,callback:function(t){e.$set(e.table,"isResize",t)},expression:"table.isResize"}},[e._v("自适应")]),e._v(" "),n("el-checkbox",{model:{value:e.table.highlightCurrentRow,callback:function(t){e.$set(e.table,"highlightCurrentRow",t)},expression:"table.highlightCurrentRow"}},[e._v("单选高亮行")]),e._v(" "),n("el-checkbox",{model:{value:e.table.loading,callback:function(t){e.$set(e.table,"loading",t)},expression:"table.loading"}},[e._v("加载")]),e._v(" "),n("el-checkbox",{model:{value:e.table.stripe,callback:function(t){e.$set(e.table,"stripe",t)},expression:"table.stripe"}},[e._v("斑马纹")])],1),e._v(" "),n("div",{staticClass:"input-item"},[n("div",{staticClass:"lablel"},[e._v("动态显示列")]),e._v(" "),e._l(e.displayColumns,(function(t,a){return n("el-checkbox",{key:t.label,attrs:{label:t.label},model:{value:t.display,callback:function(n){e.$set(t,"display",n)},expression:"item.display"}})}))],2),e._v(" "),n("div",{staticClass:"input-item"},[n("div",{staticClass:"lablel"},[e._v("高度")]),e._v(" "),n("el-input",{attrs:{type:"number"},model:{value:e.table.height,callback:function(t){e.$set(e.table,"height",t)},expression:"table.height"}})],1),e._v(" "),n("div",{staticClass:"input-item"},[n("div",{staticClass:"lablel"},[e._v("最大高度")]),e._v(" "),n("el-input",{attrs:{type:"number"},model:{value:e.table.maxHeight,callback:function(t){e.$set(e.table,"maxHeight",t)},expression:"table.maxHeight"}})],1),e._v(" "),n("div",{staticClass:"input-item"},[n("el-button",{on:{click:e.getData}},[e._v("加载数据")]),e._v(" "),n("el-button",{on:{click:e.removeData}},[e._v("清空数据")])],1)]),e._v(" "),n("div",[n("el-button",{on:{click:function(t){e.drawer=!e.drawer}}},[e._v("功能区")]),e._v(" "),e.table.isResize?n("span",[e._v("盒子高度 60vh, 表格会自适应变化")]):n("span",[e._v("盒子高度 auto")])],1),e._v(" "),n("div",{staticClass:"table-box",style:{height:e.table.isResize?"60vh":"auto"}},[n("agel-table",{attrs:{attach:e.attach},scopedSlots:e._u([{key:"append",fn:function(){return[n("p",{staticClass:"append-slot"},[e._v("table slot append .... loading ...")])]},proxy:!0},{key:"empty",fn:function(){return[n("p",{staticClass:"append-slot"},[e._v("table slot empty .... 暂无数据 ...")])]},proxy:!0},{key:"cutomHeader",fn:function(t){return[n("el-button",{attrs:{size:"mini"}},[e._v(e._s(t.column.label))])]}},{key:"cutomColumn",fn:function(t){return[n("el-button",{attrs:{size:"mini"}},[e._v("自定义列")])]}},{key:"expand",fn:function(t){t.index;var a=t.row;return[n("p",[e._v("展开行："+e._s(a.name))])]}}]),model:{value:e.table,callback:function(t){e.table=t},expression:"table"}})],1)],1)}),[],!1,null,null,null);t.default=u.exports},31:function(e,t,n){}}]);