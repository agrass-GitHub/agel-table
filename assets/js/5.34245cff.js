(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{108:function(e,t,n){},109:function(e,t,n){},270:function(e,t,n){"use strict";var a=n(108);n.n(a).a},271:function(e,t,n){"use strict";var a=n(109);n.n(a).a},275:function(e,t,n){"use strict";n.r(t);n(128);var a=n(151),i=n(0),r=n(202),l=n.n(r),o=(n(261),n(106),n(34),n(37),n(107)),s=(n(265),n(148),n(268),n(72),function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))});function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(n,!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=function e(t){var n=this,a=this.$createElement,i=this.$scopedSlots;return t.map((function(t){if(t.children&&t.children.length>0)return a("el-table-column",{attrs:p({},t),key:t.key},[e.call(n,t.children)]);var r={},l=function(e){return e&&void 0!==i[e]};return l(t.slotHeader)&&(r.header=function(e){return i[t.slotHeader](p({},e))}),l(t.slotColumn)?r.default=function(e){return i[t.slotColumn](p({},e))}:"expand"==t.type&&l("expand")&&(r.default=function(e){return i.expand(p({},e))}),a("el-table-column",{attrs:p({},t),key:t.key,scopedSlots:r})}))};function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(n,!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v={name:"agel-table",install:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.prototype.$agelTableConfig=t,e.component(t.name||this.name,this)},props:{value:{required:!0,type:Object,default:function(){return new Object}},attach:{type:Object,default:function(){return new Object}}},data:function(){return{LOAD:!1}},computed:{attrs:function(){if(!this.LOAD)return{};var e={},t=this.getApi().extendApi;for(var n in this.value)t.hasOwnProperty(n)||(e[n]=this.value[n]);if(e.height&&this.value.isPage){var a=Number(e.height)-this.value.page.height;e.height=a<0?0:a}return e},events:function(){if(!this.LOAD)return{};var e={},t=this.getApi(),n=t.eventsApi,a=t.localEventsApi,i=function(t){var i;e[(i=t,i.replace(/([A-Z])/g,"-$1").toLowerCase())]=function(){var e;n[t]&&(e=n[t].apply(n,arguments)||t),a[e]&&a[e].apply(a,arguments)}};for(var r in g({},n,{},a))i(r);return e},columns:function(){var e=this.getApi();return this.getColumns(e.localApi.columns,e.globalColumnApi)},styles:function(){var e=this.value,t=e.height,n=e.page;return{container:{height:t?t+"px":"auto"},page:{height:n.height?n.height+"px":"auto"}}}},watch:{attach:{deep:!0,handler:"initApi"},"value.isResize":"registerResize"},mounted:function(){this.initApi()},beforeDestroy:function(){this.registerResize(!1)},methods:{getApi:function(){var e=this,t={$ref:void 0,loading:!1,immediate:!1,isPage:!0,isResize:!1,columns:[],order:"",orderColumn:"",page:{},on:{},queryProps:{page:"page",pageSize:"pageSize",order:"order",orderColumn:"orderColumn"},request:null,getQuery:function(){var e,t=this.queryProps,n=t.page,a=t.pageSize,i=t.order,r=t.orderColumn;return e={},Object(o.a)(e,n,this.page.currentPage),Object(o.a)(e,a,this.page.pageSize),Object(o.a)(e,i,this.order),Object(o.a)(e,r,this.orderColumn),e},getData:function(){var e=this;this.request&&(this.loading=!0,new Promise((function(t){return e.request(e.getQuery(),t)})).then((function(t){var n=Array.isArray(t)?{data:t,total:t.length}:t,a=n.data,i=n.total;e.data=a,e.page.total=i,e.loading=!1})).catch((function(t){console.error("数据代理失败:"+t),e.loading=!1})))},resize:function(t){var n=e.value,a=function(){var t=e.$refs.container,a=t?t.parentNode.clientHeight:0;!a||a<=0||(n.height=a)};t&&"resize"==t.type?a():e.$nextTick((function(){a(),n.$ref&&n.$ref.doLayout()}))}},n={data:[],height:void 0},a={sortChange:function(t){var n=t.column,a=t.prop,i=t.order;"custom"===n.sortable&&(e.value.order=i,e.value.orderColumn=a,e.value.getData())},sizeChange:function(t){e.value.page.pageSize=t,e.value.getData()},currentChange:function(){return 2===arguments.length?"currentChange":1===arguments.length?(e.value.page.currentPage=arguments.length<=0?void 0:arguments[0],e.value.getData(),"pageChange"):void 0}},i=this.$agelTableConfig||{},r=i.table||{},l=i.page||{},s=i.column||{},c=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(n,!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.value,{},this.attach);return{extendApi:t,defaultApi:n,eventsApi:a,pageApi:{height:45,pageSize:20,pageSizes:[10,20,50,100],currentPage:1,layout:"total, sizes, prev, pager, next, jumper",class:"agel-pagination",total:0},globalApi:r,globalPageApi:l,globalColumnApi:s,localApi:c,localPageApi:c.page||{},localEventsApi:c.on||{}}},initApi:function(){var e=this,t=this.getApi(),n=g({},t.defaultApi,{},t.extendApi,{},t.globalApi,{},t.localApi,{page:g({},t.pageApi,{},t.globalPageApi,{},t.localPageApi)});this.$emit("input",n),this.LOAD||this.$nextTick((function(){e.LOAD=!0,n.immediate&&n.getData(),e.$nextTick((function(){e.value.$ref=e.$refs.table,e.registerResize()}))}))},getColumns:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;return t.map((function(t){var a={};return t.children&&t.children.length>0&&(a.children=e.getColumns(t.children,n),0==a.children.length&&(t.key=s())),t.key=null==t.key?s():t.key,t.display=void 0===t.display||t.display,g({},n,{},t,{},a)})).filter((function(e){return e.display}))},renderColumns:function(){var e=this,t=this.columns;t&&0!==t.length&&(this.$slots.columns=d.call(this,t),this.$nextTick((function(){e.$refs.table.doLayout()})))},registerResize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.value.isResize;e?(this.value.resize(),window.addEventListener("resize",this.value.resize)):window.removeEventListener("resize",this.value.resize)}}},f=(n(270),n(1)),b=Object(f.a)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.LOAD?n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.value.loading,expression:"value.loading"}],ref:"container",staticClass:"agel-table",style:e.styles.container},[n("el-table",e._g(e._b({ref:"table",staticStyle:{width:"100%"},scopedSlots:e._u([{key:"append",fn:function(){return[e._t("append")]},proxy:!0},{key:"empty",fn:function(){return[e._t("empty")]},proxy:!0},{key:"default",fn:function(){return[e._v("\n      "+e._s(e.renderColumns())+"\n      "),e._t("columns")]},proxy:!0}],null,!0)},"el-table",e.attrs,!1),e.events)),e._v(" "),e.value.isPage?n("el-pagination",e._g(e._b({ref:"page",style:e.styles.page},"el-pagination",e.value.page,!1),e.events)):e._e()],1):e._e()}),[],!1,null,null,null).exports;"undefined"!=typeof window&&window.Vue&&b.install(window.Vue);var m=b;i.default.use(l.a),i.default.use(m);var y={name:"demo",data:function(){var e=this;return{drawer:!1,table:{isResize:!0,isPage:!0,showSummary:!0,immediate:!0,showHeader:!0,lazy:!0,highlightCurrentRow:!0,rowKey:"id",sumText:"合",columns:[{label:"多选",type:"selection",align:"center",fixed:!0,display:!0,width:50},{label:"索引",type:"index",display:!0,align:"center",width:120,index:function(t){var n=e.table.page,a=n.currentPage,i=n.pageSize;return"index-".concat((a-1)*i+t)}},{label:"展开",type:"expand",display:!0,width:60},{label:"懒加载",minWidth:150,prop:"user",display:!0},{label:"多级表头",width:250,prop:"name",children:[{label:"排序筛选",prop:"name",width:150,display:!0,sortable:"custom",filters:[{text:"index == 1",value:1}],filterMethod:function(e,t){return t.index==e}},{label:"自定义表头",display:!0,width:250,slotHeader:"cutomHeader",slotColumn:"cutomColumn"}]}],page:{pageSize:5,pageSizes:[5,10]},request:function(t,n){e.http(t).then((function(e){n({data:e,total:5*t.pageSize})}))},load:function(t,n,a){e.http({page:1,pageSize:3-t.level,level:t.level+1}).then((function(e){return a(e)}))},summaryMethod:function(){return["合"].concat(Object(a.a)(e.table.columns.map((function(e,t){return t+1}))))},rowClassName:function(e){var t=e.rowIndex;return"customRowClass-".concat(t+1)},on:{sortChange:function(e){console.log("触发sortChange:",e)},currentChange:function(e){console.log("触发currentChange:",e)},pageChange:function(e){console.log("触发pageChange:"+e)},sizeChange:function(e){console.log("触发sizeChange:"+e)}}}}},computed:{displayColumns:function(){var e=this.table.columns;return[].concat(Object(a.a)(e.filter((function(e){return!e.children}))),Object(a.a)(e.find((function(e){return e.children})).children))}},watch:{"table.isResize":function(e){e||(this.table.height="")}},methods:{getData:function(){this.table.getData()},removeData:function(){var e=this;this.http({page:1,pageSize:0}).then((function(t){e.table.data=t,e.table.page.total=0,e.table.page.currentPage=1}))},http:function(e){var t=e.page,n=e.pageSize,a=e.level,i=void 0===a?1:a;return new Promise((function(e){setTimeout((function(){for(var a=[],r=0;r<n;r++){var l=(t-1)*n+r;a.push({id:Math.random(),name:"我是".concat(i,"级"),user:"admin",index:l,level:i,hasChildren:0==r&&i<3})}e(a)}),200)}))}}},x=(n(271),Object(f.a)(y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"demo-page"},[n("el-drawer",{attrs:{title:"功能区面板",direction:"rtl",visible:e.drawer,size:"400px","custom-class":"demo-page-panel"},on:{"update:visible":function(t){e.drawer=t}}},[n("div",{staticClass:"input-item"},[n("div",{staticClass:"lablel"},[e._v("功能切换")]),e._v(" "),n("el-checkbox",{model:{value:e.table.isPage,callback:function(t){e.$set(e.table,"isPage",t)},expression:"table.isPage"}},[e._v("分页")]),e._v(" "),n("el-checkbox",{model:{value:e.table.showSummary,callback:function(t){e.$set(e.table,"showSummary",t)},expression:"table.showSummary"}},[e._v("合计")]),e._v(" "),n("el-checkbox",{model:{value:e.table.isResize,callback:function(t){e.$set(e.table,"isResize",t)},expression:"table.isResize"}},[e._v("自适应")]),e._v(" "),n("el-checkbox",{model:{value:e.table.columns[0].fixed,callback:function(t){e.$set(e.table.columns[0],"fixed",t)},expression:"table.columns[0].fixed"}},[e._v("固定列")]),e._v(" "),n("el-checkbox",{model:{value:e.table.highlightCurrentRow,callback:function(t){e.$set(e.table,"highlightCurrentRow",t)},expression:"table.highlightCurrentRow"}},[e._v("单选高亮行")]),e._v(" "),n("el-checkbox",{model:{value:e.table.loading,callback:function(t){e.$set(e.table,"loading",t)},expression:"table.loading"}},[e._v("加载")]),e._v(" "),n("el-checkbox",{model:{value:e.table.stripe,callback:function(t){e.$set(e.table,"stripe",t)},expression:"table.stripe"}},[e._v("斑马纹")])],1),e._v(" "),n("div",{staticClass:"input-item"},[n("div",{staticClass:"lablel"},[e._v("动态显示列")]),e._v(" "),e._l(e.displayColumns,(function(t,a){return n("el-checkbox",{key:t.label,attrs:{label:t.label},model:{value:t.display,callback:function(n){e.$set(t,"display",n)},expression:"item.display"}})}))],2),e._v(" "),n("div",{staticClass:"input-item"},[n("div",{staticClass:"lablel"},[e._v("高度")]),e._v(" "),n("el-input",{attrs:{type:"number"},model:{value:e.table.height,callback:function(t){e.$set(e.table,"height",t)},expression:"table.height"}})],1),e._v(" "),n("div",{staticClass:"input-item"},[n("div",{staticClass:"lablel"},[e._v("最大高度")]),e._v(" "),n("el-input",{attrs:{type:"number"},model:{value:e.table.maxHeight,callback:function(t){e.$set(e.table,"maxHeight",t)},expression:"table.maxHeight"}})],1),e._v(" "),n("div",{staticClass:"input-item"},[n("el-button",{on:{click:e.getData}},[e._v("加载数据")]),e._v(" "),n("el-button",{on:{click:e.removeData}},[e._v("清空数据")])],1)]),e._v(" "),n("div",[n("el-button",{on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回文档")]),e._v(" "),n("el-button",{on:{click:function(t){e.drawer=!e.drawer}}},[e._v("功能区")]),e._v(" "),e.table.isResize?n("span",[e._v("盒子高度60vh，表格会自适应变化")]):n("span",[e._v("盒子高度 auto")])],1),e._v(" "),n("div",{staticClass:"table-box",style:{height:e.table.isResize?"60vh":"auto"}},[n("agel-table",{scopedSlots:e._u([{key:"append",fn:function(){return[n("p",{staticClass:"append-slot"},[e._v("table slot append .... loading ...")])]},proxy:!0},{key:"empty",fn:function(){return[n("p",{staticClass:"append-slot"},[e._v("table slot empty .... 暂无数据 ...")])]},proxy:!0},{key:"cutomHeader",fn:function(t){return[n("el-button",{attrs:{size:"mini"}},[e._v(e._s(t.column.label))])]}},{key:"cutomColumn",fn:function(t){return[n("el-button",{attrs:{size:"mini"}},[e._v("自定义列")])]}},{key:"expand",fn:function(t){t.index;var a=t.row;return[n("p",[e._v("展开行："+e._s(a.name))])]}}]),model:{value:e.table,callback:function(t){e.table=t},expression:"table"}})],1)],1)}),[],!1,null,null,null));t.default=x.exports}}]);